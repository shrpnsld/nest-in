source $(SAMPLE nest-in)

SECTION 'valid'

TEST-CASE 'regular'
	CHECK is-target-declaration 'some / a'
	CHECK is-target-declaration 'some / b'
	CHECK is-target-declaration 'some / one'
	CHECK is-target-declaration 'some / two'
	CHECK is-target-declaration 'some / one-two'
	CHECK is-target-declaration 'some / one_two'
	CHECK is-target-declaration 'some / one-'
	CHECK is-target-declaration 'some / two-'
	CHECK is-target-declaration 'some / one_'
	CHECK is-target-declaration 'some / two_'
	CHECK is-target-declaration 'some / one1'
	CHECK is-target-declaration 'some / two2'
	CHECK is-target-declaration 'some / one-1'
	CHECK is-target-declaration 'some / two-2'
	CHECK is-target-declaration 'some / one_1'
	CHECK is-target-declaration 'some / two_2'


SECTION 'invalid'

TEST-CASE 'all characters allowed'
	CHECK ! is-target-declaration 'some / 1'
	CHECK ! is-target-declaration 'some / 2'
	CHECK ! is-target-declaration 'some / -'
	CHECK ! is-target-declaration 'some / _'
	CHECK ! is-target-declaration 'some / 1one'
	CHECK ! is-target-declaration 'some / 2two'
	CHECK ! is-target-declaration 'some / -one'
	CHECK ! is-target-declaration 'some / -two'
	CHECK ! is-target-declaration 'some / _one'
	CHECK ! is-target-declaration 'some / _two'

TEST-CASE 'special targets as dependencies'
	CHECK ! is-target-declaration 'some / .first'
	CHECK ! is-target-declaration 'some / .last'
	CHECK ! is-target-declaration 'some / .reqs'
	CHECK ! is-target-declaration 'some / one!'
	CHECK ! is-target-declaration 'some / two!'

TEST-CASE 'first character not allowed'
	CHECK ! is-target-declaration 'some / .one'
	CHECK ! is-target-declaration 'some / .two'
	CHECK ! is-target-declaration 'some / !one'
	CHECK ! is-target-declaration 'some / !two'
	CHECK ! is-target-declaration 'some / @one'
	CHECK ! is-target-declaration 'some / @two'
	CHECK ! is-target-declaration 'some / #one'
	CHECK ! is-target-declaration 'some / #two'
	CHECK ! is-target-declaration 'some / $one'
	CHECK ! is-target-declaration 'some / $two'
	CHECK ! is-target-declaration 'some / %one'
	CHECK ! is-target-declaration 'some / %two'
	CHECK ! is-target-declaration 'some / ^one'
	CHECK ! is-target-declaration 'some / ^two'
	CHECK ! is-target-declaration 'some / &one'
	CHECK ! is-target-declaration 'some / &two'
	CHECK ! is-target-declaration 'some / *one'
	CHECK ! is-target-declaration 'some / *two'
	CHECK ! is-target-declaration 'some / (one'
	CHECK ! is-target-declaration 'some / (two'
	CHECK ! is-target-declaration 'some / )one'
	CHECK ! is-target-declaration 'some / )two'
	CHECK ! is-target-declaration 'some / [one'
	CHECK ! is-target-declaration 'some / [two'
	CHECK ! is-target-declaration 'some / ]one'
	CHECK ! is-target-declaration 'some / ]two'
	CHECK ! is-target-declaration 'some / {one'
	CHECK ! is-target-declaration 'some / {two'
	CHECK ! is-target-declaration 'some / }one'
	CHECK ! is-target-declaration 'some / }two'
	CHECK ! is-target-declaration 'some / \one'
	CHECK ! is-target-declaration 'some / \two'
	CHECK ! is-target-declaration 'some / |one'
	CHECK ! is-target-declaration 'some / |two'
	CHECK ! is-target-declaration 'some / <one'
	CHECK ! is-target-declaration 'some / <two'
	CHECK ! is-target-declaration 'some / >one'
	CHECK ! is-target-declaration 'some / >two'
	CHECK ! is-target-declaration 'some / `one'
	CHECK ! is-target-declaration 'some / `two'
	CHECK ! is-target-declaration 'some / ~one'
	CHECK ! is-target-declaration 'some / ~two'
	CHECK ! is-target-declaration 'some / ,one'
	CHECK ! is-target-declaration 'some / ,two'
	CHECK ! is-target-declaration 'some / .one'
	CHECK ! is-target-declaration 'some / .two'
	CHECK ! is-target-declaration 'some / ;one'
	CHECK ! is-target-declaration 'some / ;two'
	CHECK ! is-target-declaration 'some / :one'
	CHECK ! is-target-declaration 'some / :two'
	CHECK ! is-target-declaration 'some / ?one'
	CHECK ! is-target-declaration 'some / ?two'
	CHECK ! is-target-declaration "some / 'one"
	CHECK ! is-target-declaration "some / 'two"
	CHECK ! is-target-declaration 'some / "one'
	CHECK ! is-target-declaration 'some / "two'

TEST-CASE 'middle character not allowed'
	CHECK ! is-target-declaration 'some / on.e'
	CHECK ! is-target-declaration 'some / tw.o'
	CHECK ! is-target-declaration 'some / on!e'
	CHECK ! is-target-declaration 'some / tw!o'
	CHECK ! is-target-declaration 'some / on@e'
	CHECK ! is-target-declaration 'some / tw@o'
	CHECK ! is-target-declaration 'some / on#e'
	CHECK ! is-target-declaration 'some / tw#o'
	CHECK ! is-target-declaration 'some / on$e'
	CHECK ! is-target-declaration 'some / tw$o'
	CHECK ! is-target-declaration 'some / on%e'
	CHECK ! is-target-declaration 'some / tw%o'
	CHECK ! is-target-declaration 'some / on^e'
	CHECK ! is-target-declaration 'some / tw^o'
	CHECK ! is-target-declaration 'some / on&e'
	CHECK ! is-target-declaration 'some / tw&o'
	CHECK ! is-target-declaration 'some / on*e'
	CHECK ! is-target-declaration 'some / tw*o'
	CHECK ! is-target-declaration 'some / on(e'
	CHECK ! is-target-declaration 'some / tw(o'
	CHECK ! is-target-declaration 'some / on)e'
	CHECK ! is-target-declaration 'some / tw)o'
	CHECK ! is-target-declaration 'some / on[e'
	CHECK ! is-target-declaration 'some / tw[o'
	CHECK ! is-target-declaration 'some / on]e'
	CHECK ! is-target-declaration 'some / tw]o'
	CHECK ! is-target-declaration 'some / on{e'
	CHECK ! is-target-declaration 'some / tw{o'
	CHECK ! is-target-declaration 'some / on}e'
	CHECK ! is-target-declaration 'some / tw}o'
	CHECK ! is-target-declaration 'some / on\e'
	CHECK ! is-target-declaration 'some / tw\o'
	CHECK ! is-target-declaration 'some / on|e'
	CHECK ! is-target-declaration 'some / tw|o'
	CHECK ! is-target-declaration 'some / on<e'
	CHECK ! is-target-declaration 'some / tw<o'
	CHECK ! is-target-declaration 'some / on>e'
	CHECK ! is-target-declaration 'some / tw>o'
	CHECK ! is-target-declaration 'some / on`e'
	CHECK ! is-target-declaration 'some / tw`o'
	CHECK ! is-target-declaration 'some / on~e'
	CHECK ! is-target-declaration 'some / tw~o'
	CHECK ! is-target-declaration 'some / on,e'
	CHECK ! is-target-declaration 'some / tw,o'
	CHECK ! is-target-declaration 'some / on.e'
	CHECK ! is-target-declaration 'some / tw.o'
	CHECK ! is-target-declaration 'some / on;e'
	CHECK ! is-target-declaration 'some / tw;o'
	CHECK ! is-target-declaration 'some / on:e'
	CHECK ! is-target-declaration 'some / tw:o'
	CHECK ! is-target-declaration 'some / on?e'
	CHECK ! is-target-declaration 'some / tw?o'
	CHECK ! is-target-declaration "some / on'e"
	CHECK ! is-target-declaration "some / tw'o"
	CHECK ! is-target-declaration 'some / on"e'
	CHECK ! is-target-declaration 'some / tw"o'

TEST-CASE 'last character not allowed'
	CHECK ! is-target-declaration 'some / one.'
	CHECK ! is-target-declaration 'some / two.'
	CHECK ! is-target-declaration 'some / one@'
	CHECK ! is-target-declaration 'some / two@'
	CHECK ! is-target-declaration 'some / one#'
	CHECK ! is-target-declaration 'some / two#'
	CHECK ! is-target-declaration 'some / one$'
	CHECK ! is-target-declaration 'some / two$'
	CHECK ! is-target-declaration 'some / one%'
	CHECK ! is-target-declaration 'some / two%'
	CHECK ! is-target-declaration 'some / one^'
	CHECK ! is-target-declaration 'some / two^'
	CHECK ! is-target-declaration 'some / one&'
	CHECK ! is-target-declaration 'some / two&'
	CHECK ! is-target-declaration 'some / one*'
	CHECK ! is-target-declaration 'some / two*'
	CHECK ! is-target-declaration 'some / one('
	CHECK ! is-target-declaration 'some / two('
	CHECK ! is-target-declaration 'some / one)'
	CHECK ! is-target-declaration 'some / two)'
	CHECK ! is-target-declaration 'some / one['
	CHECK ! is-target-declaration 'some / two['
	CHECK ! is-target-declaration 'some / one]'
	CHECK ! is-target-declaration 'some / two]'
	CHECK ! is-target-declaration 'some / one{'
	CHECK ! is-target-declaration 'some / two{'
	CHECK ! is-target-declaration 'some / one}'
	CHECK ! is-target-declaration 'some / two}'
	CHECK ! is-target-declaration 'some / one\'
	CHECK ! is-target-declaration 'some / two\'
	CHECK ! is-target-declaration 'some / one|'
	CHECK ! is-target-declaration 'some / two|'
	CHECK ! is-target-declaration 'some / one<'
	CHECK ! is-target-declaration 'some / two<'
	CHECK ! is-target-declaration 'some / one>'
	CHECK ! is-target-declaration 'some / two>'
	CHECK ! is-target-declaration 'some / one`'
	CHECK ! is-target-declaration 'some / two`'
	CHECK ! is-target-declaration 'some / one~'
	CHECK ! is-target-declaration 'some / two~'
	CHECK ! is-target-declaration 'some / one,'
	CHECK ! is-target-declaration 'some / two,'
	CHECK ! is-target-declaration 'some / one.'
	CHECK ! is-target-declaration 'some / two.'
	CHECK ! is-target-declaration 'some / one;'
	CHECK ! is-target-declaration 'some / two;'
	CHECK ! is-target-declaration 'some / one:'
	CHECK ! is-target-declaration 'some / two:'
	CHECK ! is-target-declaration 'some / one?'
	CHECK ! is-target-declaration 'some / two?'
	CHECK ! is-target-declaration "some / one'"
	CHECK ! is-target-declaration "some / two'"
	CHECK ! is-target-declaration 'some / one"'
	CHECK ! is-target-declaration 'some / two"'

TEST-CASE 'single special character'
	CHECK ! is-target-declaration 'some / .'
	CHECK ! is-target-declaration 'some / !'
	CHECK ! is-target-declaration 'some / @'
	CHECK ! is-target-declaration 'some / #'
	CHECK ! is-target-declaration 'some / $'
	CHECK ! is-target-declaration 'some / %'
	CHECK ! is-target-declaration 'some / ^'
	CHECK ! is-target-declaration 'some / &'
	CHECK ! is-target-declaration 'some / *'
	CHECK ! is-target-declaration 'some / ('
	CHECK ! is-target-declaration 'some / )'
	CHECK ! is-target-declaration 'some / ['
	CHECK ! is-target-declaration 'some / ]'
	CHECK ! is-target-declaration 'some / {'
	CHECK ! is-target-declaration 'some / }'
	CHECK ! is-target-declaration 'some / \'
	CHECK ! is-target-declaration 'some / |'
	CHECK ! is-target-declaration 'some / <'
	CHECK ! is-target-declaration 'some / >'
	CHECK ! is-target-declaration 'some / `'
	CHECK ! is-target-declaration 'some / ~'
	CHECK ! is-target-declaration 'some / ,'
	CHECK ! is-target-declaration 'some / .'
	CHECK ! is-target-declaration 'some / ;'
	CHECK ! is-target-declaration 'some / :'
	CHECK ! is-target-declaration 'some / ?'
	CHECK ! is-target-declaration "some / '"
	CHECK ! is-target-declaration 'some / "'

